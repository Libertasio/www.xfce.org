<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Internationalization</title><meta name="generator" content="DocBook XSL Stylesheets V1.66.1"><link rel="start" href="index.html" title="libxfce4util Reference Manual"><link rel="up" href="libxfce4util-fundamentals.html" title="Xfce Fundamentals"><link rel="prev" href="libxfce4util-Standard-Macros.html" title="Standard Macros"><link rel="next" href="libxfce4util-core.html" title="Xfce Core Application support"><meta name="generator" content="GTK-Doc V1.2 (XML mode)"><style type="text/css">
        .synopsis, .classsynopsis {
            background: #eeeeee;
            border: solid 1px #aaaaaa;
            padding: 0.5em;
        }
        .programlisting {
            background: #eeeeff;
            border: solid 1px #aaaaff;
            padding: 0.5em;
        }
        .variablelist {
            padding: 4px;
            margin-left: 3em;
        }
        .navigation {
            background: #ffeeee;
            border: solid 1px #ffaaaa;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }
        .navigation a {
            color: #770000;
        }
        .navigation a:visited {
            color: #550000;
        }
        .navigation .title {
            font-size: 200%;
        }
      </style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle"><td><a accesskey="p" href="libxfce4util-Standard-Macros.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td><td><a accesskey="u" href="libxfce4util-fundamentals.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td><td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td><th width="100%" align="center">libxfce4util Reference Manual</th><td><a accesskey="n" href="libxfce4util-core.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td></tr></table><div class="refentry" lang="en"><a name="libxfce4util-Internationalisation"></a><div class="titlepage"></div><div class="refnamediv"><h2><span class="refentrytitle">Internationalization</span></h2><p>Internationalization &#8212; Internationalization and Localization Support Functions</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">

#include &lt;libxfce4util/libxfce4util.h&gt;


#define     <a href="libxfce4util-Internationalisation.html#gettext-macro">_</a>                               (s)
#define     <a href="libxfce4util-Internationalisation.html#N--CAPS">N_</a>                              (s)
#define     <a href="libxfce4util-Internationalisation.html#Q--CAPS">Q_</a>                              (s)
#define     <a href="libxfce4util-Internationalisation.html#xfce-textdomain">xfce_textdomain</a>                 (package, localedir, encoding)
G_CONST_RETURN gchar* <a href="libxfce4util-Internationalisation.html#xfce-strip-context">xfce_strip_context</a>    (const gchar *msgid,
                                             const gchar *msgval);
gchar*      <a href="libxfce4util-Internationalisation.html#xfce-get-file-localized">xfce_get_file_localized</a>         (const gchar *filename);
gchar*      <a href="libxfce4util-Internationalisation.html#xfce-get-file-localized-r">xfce_get_file_localized_r</a>       (gchar *buffer,
                                             gsize length,
                                             const gchar *filename);
gchar*      <a href="libxfce4util-Internationalisation.html#xfce-get-dir-localized">xfce_get_dir_localized</a>          (const gchar *directory);
gchar*      <a href="libxfce4util-Internationalisation.html#xfce-get-dir-localized-r">xfce_get_dir_localized_r</a>        (gchar *buffer,
                                             gsize length,
                                             const gchar *directory);
gchar*      <a href="libxfce4util-Internationalisation.html#xfce-get-path-localized">xfce_get_path_localized</a>         (gchar *dst,
                                             gsize size,
                                             const gchar *paths,
                                             const gchar *filename,
                                             GFileTest test);
#define     <a href="libxfce4util-Internationalisation.html#XFCE-LOCALE-FULL-MATCH-CAPS">XFCE_LOCALE_FULL_MATCH</a>
#define     <a href="libxfce4util-Internationalisation.html#XFCE-LOCALE-NO-MATCH-CAPS">XFCE_LOCALE_NO_MATCH</a>
guint       <a href="libxfce4util-Internationalisation.html#xfce-locale-match">xfce_locale_match</a>               (const gchar *locale1,
                                             const gchar *locale2);
</pre></div><div class="refsect1" lang="en"><a name="id2526320"></a><h2>Description</h2><p>
Provides functions and preprocessor macros to aid the application developers
making his software localizable. It also offers functionality similar to the
one introduced in GLib 2.4 and referenced as gi18n. This includes the <a href="libxfce4util-Internationalisation.html#Q--CAPS"><span class="type">Q_</span></a>
gettext macro and the <a href="libxfce4util-Internationalisation.html#xfce-strip-context"><span class="type">xfce_strip_context</span></a> function.
</p></div><div class="refsect1" lang="en"><a name="id2526350"></a><h2>Details</h2><div class="refsect2" lang="en"><a name="id2526356"></a><h3><a name="gettext-macro"></a>_()</h3><a class="indexterm" name="id2526366"></a><pre class="programlisting">#define     _(s)</pre><p>
Marks a string for translation, gets replaced with the translated string at runtime.
</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>s</tt></i> :</span></td><td>string to translate.


</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2526400"></a><h3><a name="N--CAPS"></a>N_()</h3><a class="indexterm" name="id2526410"></a><pre class="programlisting">#define     N_(s)</pre><p>
Marks a string for translation, gets replaced with the untranslated string at runtime.
This is useful in situations where the translated strings can't be directly used, e.g.
in string array initializers.
</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>s</tt></i> :</span></td><td>the string to be translated.


</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2526446"></a><h3><a name="Q--CAPS"></a>Q_()</h3><a class="indexterm" name="id2526456"></a><pre class="programlisting">#define     Q_(s)</pre><p>
Like <a href="libxfce4util-Internationalisation.html#gettext-macro"><tt class="function">_()</tt></a>, but applies <a href="libxfce4util-Internationalisation.html#xfce-strip-context"><tt class="function">xfce_strip_context()</tt></a> to the translation. This has the advantage that
the string can be adorned with a prefix to guarantee uniqueness and provide context to
the package translator.
</p><p>
One use case given in the gettext manual is GUI translation, where one could e.g.
disambiguate two "Open" menu entries as "File|Open" and "Printer|Open". Another use case
is the string "Russian" which may have to be translated differently depending on whether
it is the name of a character set or a language. This could be solved by using
"charset|Russian" and "language|Russian". 
</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>s</tt></i> :</span></td><td>the string to be translated, with a '|'-separated prefix which must not be
    translated by the package translators.


</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2526525"></a><h3><a name="xfce-textdomain"></a>xfce_textdomain()</h3><a class="indexterm" name="id2526535"></a><pre class="programlisting">#define     xfce_textdomain(package, localedir, encoding)</pre><p>
Binds the current text domain for <i class="parameter"><tt>package</tt></i> to <i class="parameter"><tt>localedir</tt></i> and sets <i class="parameter"><tt>encoding</tt></i>.
</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>package</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>localedir</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>encoding</tt></i> :</span></td><td>


</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2526614"></a><h3><a name="xfce-strip-context"></a>xfce_strip_context ()</h3><a class="indexterm" name="id2526625"></a><pre class="programlisting">G_CONST_RETURN gchar* xfce_strip_context    (const gchar *msgid,
                                             const gchar *msgval);</pre><p>
Portable replacement for <tt class="function">g_strip_context()</tt> introduced in GLib 2.4. You
prefer this method over <tt class="function">g_strip_context()</tt> cause it allows your software
to be used with older versions of GLib as well, though libxfce4util also
defines a macro named <tt class="function">g_strip_context()</tt> that simply calls <a href="libxfce4util-Internationalisation.html#xfce-strip-context"><span class="type">xfce_strip_context</span></a>
if an older GLib version is detected.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>msgid</tt></i> :</span></td><td> a string that may be translated.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>msgval</tt></i> :</span></td><td> a possible translation for <i class="parameter"><tt>msgid</tt></i> or the same as <i class="parameter"><tt>msgid</tt></i>.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> <i class="parameter"><tt>msgval</tt></i>, unless <i class="parameter"><tt>msgval</tt></i> is identical to <i class="parameter"><tt>msgid</tt></i> and contains a
              '|' character, in which case a pointer to the substring of <i class="parameter"><tt>msgid</tt></i>
              after the first '|' character is returned

</td></tr></tbody></table></div><p>Since  4.2
</p></div><hr><div class="refsect2" lang="en"><a name="id2526793"></a><h3><a name="xfce-get-file-localized"></a>xfce_get_file_localized ()</h3><a class="indexterm" name="id2526804"></a><pre class="programlisting">gchar*      xfce_get_file_localized         (const gchar *filename);</pre><p>
Checks if theres a version of <i class="parameter"><tt>filename</tt></i> which is localized to the current
locale. This is done by appending the full locale name to <i class="parameter"><tt>filename</tt></i>, separated
by a '.'. If theres no file of that name, it retries using the full locale
name without the encoding (if any), then without the qualifier (if any) and
at last the base locale is tried. If all of those fails, a copy of <i class="parameter"><tt>filename</tt></i>
is returned.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>filename</tt></i> :</span></td><td> name of a file to look for a localized version.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> path of the localized file or copy of <i class="parameter"><tt>filename</tt></i> if no such
              file exists. Returned string should be freed using <tt class="function">g_free()</tt>.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2526907"></a><h3><a name="xfce-get-file-localized-r"></a>xfce_get_file_localized_r ()</h3><a class="indexterm" name="id2526919"></a><pre class="programlisting">gchar*      xfce_get_file_localized_r       (gchar *buffer,
                                             gsize length,
                                             const gchar *filename);</pre><p>
Similar in functionality to <a href="libxfce4util-Internationalisation.html#xfce-get-file-localized"><span class="type">xfce_get_file_localized</span></a>, but stores the
result in <i class="parameter"><tt>buffer</tt></i> instead of allocating a new buffer.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>buffer</tt></i> :</span></td><td> destination buffer to store the localized filename to.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>length</tt></i> :</span></td><td> size of <i class="parameter"><tt>buffer</tt></i> in bytes.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>filename</tt></i> :</span></td><td> name of a file to look for a localized version.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> pointer to <i class="parameter"><tt>buffer</tt></i> or <tt class="literal">NULL</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2527057"></a><h3><a name="xfce-get-dir-localized"></a>xfce_get_dir_localized ()</h3><a class="indexterm" name="id2527068"></a><pre class="programlisting">gchar*      xfce_get_dir_localized          (const gchar *directory);</pre><p>
Similar to <a href="libxfce4util-Internationalisation.html#xfce-get-file-localized"><span class="type">xfce_get_file_localized</span></a>, but works on directory instead of
a file.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>directory</tt></i> :</span></td><td> directory name to check for a localized variant.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> path of the localized directory name or copy of <i class="parameter"><tt>directory</tt></i> if
              no such directory exists. Returned string should be freed using
              <tt class="function">g_free()</tt>.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2527157"></a><h3><a name="xfce-get-dir-localized-r"></a>xfce_get_dir_localized_r ()</h3><a class="indexterm" name="id2527168"></a><pre class="programlisting">gchar*      xfce_get_dir_localized_r        (gchar *buffer,
                                             gsize length,
                                             const gchar *directory);</pre><p>
Similar to <a href="libxfce4util-Internationalisation.html#xfce-get-file-localized-r"><span class="type">xfce_get_file_localized_r</span></a>, but works on directory instead
of regular file.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>buffer</tt></i> :</span></td><td> destination buffer to store the localized filename to.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>length</tt></i> :</span></td><td> size of <i class="parameter"><tt>buffer</tt></i> in bytes.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>directory</tt></i> :</span></td><td> name of directory to check for localized variant of.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> pointer to <i class="parameter"><tt>buffer</tt></i> or <tt class="literal">NULL</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2527300"></a><h3><a name="xfce-get-path-localized"></a>xfce_get_path_localized ()</h3><a class="indexterm" name="id2527311"></a><pre class="programlisting">gchar*      xfce_get_path_localized         (gchar *dst,
                                             gsize size,
                                             const gchar *paths,
                                             const gchar *filename,
                                             GFileTest test);</pre><p>
<i class="parameter"><tt>paths</tt></i> is a ':'-separated list of pathnames.
</p><p>
<tt class="literal">F</tt>	- The <i class="parameter"><tt>filename</tt></i>
<tt class="literal">L</tt>	- The language string, as returned by 
	  setlocale(LC_MESSAGES, NULL)
<tt class="literal">l</tt>	- The language component of the language string
<tt class="literal">N</tt>	- application name
</p><p>
Example paths:
</p><p>
/usr/local/lib/<tt class="literal">L</tt>/<tt class="literal">F</tt>:/usr/local/share/<tt class="literal">N</tt>/<tt class="literal">l</tt>/<tt class="literal">F</tt></p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dst</tt></i> :</span></td><td> destination buffer.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>size</tt></i> :</span></td><td> size of <i class="parameter"><tt>dst</tt></i> in bytes.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>paths</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>filename</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>test</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td>
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2527536"></a><h3><a name="XFCE-LOCALE-FULL-MATCH-CAPS"></a>XFCE_LOCALE_FULL_MATCH</h3><a class="indexterm" name="id2527547"></a><pre class="programlisting">#define XFCE_LOCALE_FULL_MATCH 50
</pre><p>
Returned by <a href="libxfce4util-Internationalisation.html#xfce-locale-match"><span class="type">xfce_locale_match</span></a> in case of a full match.
</p></div><hr><div class="refsect2" lang="en"><a name="id2527571"></a><h3><a name="XFCE-LOCALE-NO-MATCH-CAPS"></a>XFCE_LOCALE_NO_MATCH</h3><a class="indexterm" name="id2527582"></a><pre class="programlisting">#define XFCE_LOCALE_NO_MATCH    0
</pre><p>
Returned by <a href="libxfce4util-Internationalisation.html#xfce-locale-match"><span class="type">xfce_locale_match</span></a> if no match could be detected.
</p></div><hr><div class="refsect2" lang="en"><a name="id2527607"></a><h3><a name="xfce-locale-match"></a>xfce_locale_match ()</h3><a class="indexterm" name="id2527618"></a><pre class="programlisting">guint       xfce_locale_match               (const gchar *locale1,
                                             const gchar *locale2);</pre><p>
The locale is of the general form LANG_COUNTRY.ENCODING @ MODIFIER, where
each of COUNTRY, ENCODING and MODIFIER can be absent.
</p><p>
The match is done by actually removing the rightmost element one by one. This
is not entirely according to the freedesktop.org specification, but much easier.
Will probably be fixed in the future.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>locale1</tt></i> :</span></td><td> the current locale value as returned by setlocale(LC_MESSAGES,<tt class="literal">NULL</tt>).
</td></tr><tr><td><span class="term"><i class="parameter"><tt>locale2</tt></i> :</span></td><td> the locale value to match against.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> an integer value indicating the level of matching, where
              the constant <a href="libxfce4util-Internationalisation.html#XFCE-LOCALE-FULL-MATCH-CAPS"><span class="type">XFCE_LOCALE_FULL_MATCH</span></a> indicates a full match
              and <a href="libxfce4util-Internationalisation.html#XFCE-LOCALE-NO-MATCH-CAPS"><span class="type">XFCE_LOCALE_NO_MATCH</span></a> means no match. Every other value
              indicates a partial match, the higher the value, the better
              the match. You should not rely on any specific value besides
              the constants <a href="libxfce4util-Internationalisation.html#XFCE-LOCALE-FULL-MATCH-CAPS"><span class="type">XFCE_LOCALE_FULL_MATCH</span></a> and <a href="libxfce4util-Internationalisation.html#XFCE-LOCALE-NO-MATCH-CAPS"><span class="type">XFCE_LOCALE_NO_MATCH</span></a>,
              since the range of returned values may change in the future.

</td></tr></tbody></table></div><p>Since  4.2
</p></div></div><div class="refsect1" lang="en"><a name="id2527760"></a><h2>See Also</h2><p>
<a href="http://developer.gnome.org/doc/API/2.0/glib/glib-I18N.html" target="_top">GLib
Internationalization</a>
</p></div></div><table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle"><td align="left"><a accesskey="p" href="libxfce4util-Standard-Macros.html"><b>&lt;&lt; Standard Macros</b></a></td><td align="right"><a accesskey="n" href="libxfce4util-core.html"><b>Xfce Core Application support &gt;&gt;</b></a></td></tr></table></body></html>
