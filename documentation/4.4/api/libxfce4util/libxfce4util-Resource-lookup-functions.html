<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Resource lookup functions</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="libxfce4util Reference Manual">
<link rel="up" href="libxfce4util-utilities.html" title="Xfce Utilities">
<link rel="prev" href="libxfce4util-utilities.html" title="Xfce Utilities">
<link rel="next" href="libxfce4util-Resource-Config-File-Support.html" title="Resource Config File Support">
<meta name="generator" content="GTK-Doc V1.4 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="reference.html" title="libxfce4util Overview">
<link rel="chapter" href="libxfce4util-fundamentals.html" title="Xfce Fundamentals">
<link rel="chapter" href="libxfce4util-core.html" title="Xfce Core Application support">
<link rel="chapter" href="libxfce4util-utilities.html" title="Xfce Utilities">
<link rel="chapter" href="libxfce4util-datatypes.html" title="Xfce Data types">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle">
<td><a accesskey="p" href="libxfce4util-utilities.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="libxfce4util-utilities.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">libxfce4util Reference Manual</th>
<td><a accesskey="n" href="libxfce4util-Resource-Config-File-Support.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry" lang="en">
<a name="libxfce4util-Resource-lookup-functions"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">Resource lookup functions</span></h2>
<p>Resource lookup functions &#8212; </p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;libxfce4util/libxfce4util.h&gt;


enum        <a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a>;
gboolean    (<a href="libxfce4util-Resource-lookup-functions.html#XfceMatchFunc">*XfceMatchFunc</a>)                (const gchar *basedir,
                                             const gchar *relpath,
                                             gpointer user_data);
gchar**     <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-dirs">xfce_resource_dirs</a>              (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type);
gchar*      <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-lookup">xfce_resource_lookup</a>            (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *filename);
gchar**     <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-lookup-all">xfce_resource_lookup_all</a>        (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *filename);
gchar**     <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-match">xfce_resource_match</a>             (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *pattern,
                                             gboolean unique);
gchar**     <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-match-custom">xfce_resource_match_custom</a>      (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             gboolean unique,
                                             <a href="libxfce4util-Resource-lookup-functions.html#XfceMatchFunc">XfceMatchFunc</a> func,
                                             gpointer user_data);
void        <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-push-path">xfce_resource_push_path</a>         (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *path);
void        <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-pop-path">xfce_resource_pop_path</a>          (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type);
gchar*      <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-save-location">xfce_resource_save_location</a>     (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *relpath,
                                             gboolean create);
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2610308"></a><h2>Description</h2>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="id2610317"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2610323"></a><h3>
<a name="XfceResourceType"></a>enum XfceResourceType</h3>
<a class="indexterm" name="id2610331"></a><pre class="programlisting">typedef enum /*&lt; prefix=XFCE_RESOURCE_ &gt;*/
{
  XFCE_RESOURCE_DATA   = 0,
  XFCE_RESOURCE_CONFIG = 1,
  XFCE_RESOURCE_CACHE  = 2,
  XFCE_RESOURCE_ICONS  = 3,
  XFCE_RESOURCE_THEMES = 4,
} XfceResourceType;
</pre>
<p>
</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><code class="literal">XFCE_RESOURCE_DATA</code></span></td>
<td> where applications store data.
</td>
</tr>
<tr>
<td>
<span class="term"><code class="literal">XFCE_RESOURCE_CONFIG</code></span></td>
<td> configuration files.
</td>
</tr>
<tr>
<td>
<span class="term"><code class="literal">XFCE_RESOURCE_CACHE</code></span></td>
<td> cached information.
</td>
</tr>
<tr>
<td>
<span class="term"><code class="literal">XFCE_RESOURCE_ICONS</code></span></td>
<td> icon search path.
</td>
</tr>
<tr>
<td>
<span class="term"><code class="literal">XFCE_RESOURCE_THEMES</code></span></td>
<td> themes search path.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2610491"></a><h3>
<a name="XfceMatchFunc"></a>XfceMatchFunc ()</h3>
<a class="indexterm" name="id2610500"></a><pre class="programlisting">gboolean    (*XfceMatchFunc)                (const gchar *basedir,
                                             const gchar *relpath,
                                             gpointer user_data);</pre>
<p>
Return value :</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>basedir</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>relpath</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td> additional user data passed to <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-match-custom"><code class="function">xfce_resource_match_custom()</code></a>.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td>


</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2610670"></a><h3>
<a name="xfce-resource-dirs"></a>xfce_resource_dirs ()</h3>
<a class="indexterm" name="id2610679"></a><pre class="programlisting">gchar**     xfce_resource_dirs              (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type);</pre>
<p>
Queries the list of possible directories for the specified <em class="parameter"><code>type</code></em>. The
first element of the list is always the save location for <em class="parameter"><code>type</code></em>. None
of the directories returned in the list are garantied to exist.
</p>
<p>
This function should be rarely used. You should consider using
<a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-lookup"><code class="function">xfce_resource_lookup()</code></a>, <code class="function">xfce_resource_lookup_dirs()</code> or
<a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-match"><code class="function">xfce_resource_match()</code></a> instead.
</p>
<p>
The returned list must be freed using <code class="function">g_strfreev()</code>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of the resource.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> list of possible directories for <em class="parameter"><code>type</code></em>.

</td>
</tr>
</tbody>
</table></div>
<p>Since  4.2
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2610797"></a><h3>
<a name="xfce-resource-lookup"></a>xfce_resource_lookup ()</h3>
<a class="indexterm" name="id2610806"></a><pre class="programlisting">gchar*      xfce_resource_lookup            (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *filename);</pre>
<p>
Looks for a resource of the specified <em class="parameter"><code>type</code></em> whose relative path matches
<em class="parameter"><code>filename</code></em>. <em class="parameter"><code>filename</code></em> can either reference a regular file, in which case
it must not end with a slash character ('/'), or a directory, when
<em class="parameter"><code>filename</code></em> contains a trailing slash character ('/').
</p>
<p>
The caller is responsible to free the returned string using <code class="function">g_free()</code>
when no longer needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of resource to lookup.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>filename</code></em>&#160;:</span></td>
<td> relative filename of the resource, e.g. "xfwm4/xfwmrc".
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the absolute path to the first file or directory in the
              search path, that matches <em class="parameter"><code>filename</code></em> or <code class="literal">NULL</code> if no such
              file or directory could be found.

</td>
</tr>
</tbody>
</table></div>
<p>Since  4.2
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2610933"></a><h3>
<a name="xfce-resource-lookup-all"></a>xfce_resource_lookup_all ()</h3>
<a class="indexterm" name="id2610941"></a><pre class="programlisting">gchar**     xfce_resource_lookup_all        (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *filename);</pre>
<p>
Similar to <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-lookup"><code class="function">xfce_resource_lookup()</code></a>, but returns all resource of the specified <em class="parameter"><code>type</code></em>,
that whose name is <em class="parameter"><code>filename</code></em>.
</p>
<p>
The caller is responsible to free the returned string array using <code class="function">g_strfreev()</code>
when no longer needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of the resource to lookup.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>filename</code></em>&#160;:</span></td>
<td> relative file path. If <em class="parameter"><code>filename</code></em> contains a trailing slash character
            it is taken to reference a directory, else it is taken to reference
            a file.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td>

</td>
</tr>
</tbody>
</table></div>
<p>Since  4.2
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2611126"></a><h3>
<a name="xfce-resource-match"></a>xfce_resource_match ()</h3>
<a class="indexterm" name="id2611134"></a><pre class="programlisting">gchar**     xfce_resource_match             (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *pattern,
                                             gboolean unique);</pre>
<p>
Tries to find all resources with the specified <em class="parameter"><code>type</code></em>. The function will
look into all specified directories and return all filenames in these
directories. The returned filenames are given relative the base directories
specified by <em class="parameter"><code>type</code></em>.
</p>
<p>
If <em class="parameter"><code>pattern</code></em> contains a trailing slash, <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-match"><span class="type">xfce_resource_match</span></a> looks only for
directories that match <em class="parameter"><code>pattern</code></em>, else it'll only look for regular files. In
case you are looking for directories, the returned entries will contain a
trailing slash as well, so you can easily use them with other resource
functions like <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-lookup"><span class="type">xfce_resource_lookup</span></a> or <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-save-location"><span class="type">xfce_resource_save_location</span></a>.
</p>
<p>
Example: xfce_resource_match (XFCE_RESOURCE_CONFIG, "foo/bar*") will probably
return ("foo/bar", "foo/barbaz", ...).</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of the resource to locate directories for.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>pattern</code></em>&#160;:</span></td>
<td> only accept filenames that fit to the pattern. The pattern
             needs to be a valid GPattern.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>unique</code></em>&#160;:</span></td>
<td> if <code class="literal">TRUE</code>, only return items which have unique suffixes.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> string array of all the relative paths whose names matches the
              given <em class="parameter"><code>pattern</code></em>. The return value has to be freed using
              <code class="function">g_strfreev()</code> when no longer needed.

</td>
</tr>
</tbody>
</table></div>
<p>Since  4.2
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2611303"></a><h3>
<a name="xfce-resource-match-custom"></a>xfce_resource_match_custom ()</h3>
<a class="indexterm" name="id2611312"></a><pre class="programlisting">gchar**     xfce_resource_match_custom      (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             gboolean unique,
                                             <a href="libxfce4util-Resource-lookup-functions.html#XfceMatchFunc">XfceMatchFunc</a> func,
                                             gpointer user_data);</pre>
<p>
Yet to be implemented!
</p>
<p>
The caller is responsible to free the returned string array using <code class="function">g_strfreev()</code>
when no longer needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of the resource to locate directories for.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>unique</code></em>&#160;:</span></td>
<td> if <code class="literal">TRUE</code>, only return items which have unique suffixes.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>func</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td>

</td>
</tr>
</tbody>
</table></div>
<p>Since  4.2
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2611447"></a><h3>
<a name="xfce-resource-push-path"></a>xfce_resource_push_path ()</h3>
<a class="indexterm" name="id2611456"></a><pre class="programlisting">void        xfce_resource_push_path         (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *path);</pre>
<p>
Appends <em class="parameter"><code>path</code></em> to the search path list for <em class="parameter"><code>type</code></em>. This function was
written primary for use within modules in larger applications, for example
MCS plugins.
</p>
<p>
For example, if you need to add a specific path to the search path list
in your MCS, you should call <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-push-path"><code class="function">xfce_resource_push_path()</code></a> prior to calling
one of the resource search functions and call <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-pop-path"><code class="function">xfce_resource_pop_path()</code></a>
right afterwards.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of the resource which search list should be expanded.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>path</code></em>&#160;:</span></td>
<td> search path to add.
</td>
</tr>
</tbody>
</table></div>
<p>Since  4.2
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2611624"></a><h3>
<a name="xfce-resource-pop-path"></a>xfce_resource_pop_path ()</h3>
<a class="indexterm" name="id2611633"></a><pre class="programlisting">void        xfce_resource_pop_path          (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type);</pre>
<p>
Undoes the effect of the latest call to <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-push-path"><code class="function">xfce_resource_push_path()</code></a>. You
should take special care to call <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-pop-path"><code class="function">xfce_resource_pop_path()</code></a> exactly same
times as <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-push-path"><code class="function">xfce_resource_push_path()</code></a>, everything else might result in
unwanted and maybe even undefined behaviour. You have been warned!</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of the resource which search list should be shrinked.
</td>
</tr></tbody>
</table></div>
<p>Since  4.2
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2611710"></a><h3>
<a name="xfce-resource-save-location"></a>xfce_resource_save_location ()</h3>
<a class="indexterm" name="id2611719"></a><pre class="programlisting">gchar*      xfce_resource_save_location     (<a href="libxfce4util-Resource-lookup-functions.html#XfceResourceType">XfceResourceType</a> type,
                                             const gchar *relpath,
                                             gboolean create);</pre>
<p>
If <em class="parameter"><code>relpath</code></em> contains a trailing slash ('/') character, <a href="libxfce4util-Resource-lookup-functions.html#xfce-resource-save-location"><code class="function">xfce_resource_save_location()</code></a>
finds the directory to save files into for the given type in the user's
home directory. All directories needed (including those given by
<em class="parameter"><code>relpath</code></em>) will be created on demand if <em class="parameter"><code>create</code></em> if <code class="literal">TRUE</code>.
</p>
<p>
If <em class="parameter"><code>relpath</code></em> does not end with a slash ('/') character, it is taken to be
the name of a file to return the save location for. All the directories
needed will be created on demand if <em class="parameter"><code>create</code></em> is <code class="literal">TRUE</code>.
</p>
<p>
Specifying <code class="literal">NULL</code> or the empty string for <em class="parameter"><code>relpath</code></em> allows you to discover
the base path for saving files of the specified <em class="parameter"><code>type</code></em>, though normally
you should not need this.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> type of location to return.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>relpath</code></em>&#160;:</span></td>
<td> relative path of the resource.
</td>
</tr>
<tr>
<td>
<span class="term"><em class="parameter"><code>create</code></em>&#160;:</span></td>
<td> whether to create missing directory.
</td>
</tr>
<tr>
<td>
<span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the path where resources of the specified <em class="parameter"><code>type</code></em> should be
              saved or <code class="literal">NULL</code> on error. The returned string should be freed
              when no longer needed.

</td>
</tr>
</tbody>
</table></div>
<p>Since  4.2
</p>
</div>
</div>
</div>
<table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle">
<td align="left"><a accesskey="p" href="libxfce4util-utilities.html"><b>&lt;&lt;&#160;Xfce Utilities</b></a></td>
<td align="right"><a accesskey="n" href="libxfce4util-Resource-Config-File-Support.html"><b>Resource Config File Support&#160;&gt;&gt;</b></a></td>
</tr></table>
</body>
</html>
