<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>HAL Support Functions</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="exo Reference Manual">
<link rel="up" href="exo-miscelleanous.html" title="Part&#160;VI.&#160;Miscelleanous">
<link rel="prev" href="exo-Miscellaneous-Utility-Functions.html" title="Miscellaneous Utility Functions">
<link rel="next" href="ExoXsessionClient.html" title="ExoXsessionClient">
<meta name="generator" content="GTK-Doc V1.8 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="part" href="exo-overview.html" title="Part&#160;I.&#160;Overview">
<link rel="part" href="exo-toolbars.html" title="Part&#160;II.&#160;Editable Toolbars">
<link rel="part" href="exo-widgets.html" title="Part&#160;III.&#160;Additional widgets">
<link rel="part" href="exo-cell-renderers.html" title="Part&#160;IV.&#160;Additional cell renderers">
<link rel="part" href="exo-extensions.html" title="Part&#160;V.&#160;Extensions to existing frameworks">
<link rel="part" href="exo-miscelleanous.html" title="Part&#160;VI.&#160;Miscelleanous">
<link rel="part" href="exo-tools.html" title="Part&#160;VII.&#160;Tools">
<link rel="part" href="exo-deprecated-widgets.html" title="Part&#160;VIII.&#160;Deprecated widgets">
<link rel="chapter" href="ch01.html" title="Visual Index">
<link rel="index" href="ix01.html" title="Index">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="exo-Miscellaneous-Utility-Functions.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="exo-miscelleanous.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">exo Reference Manual</th>
<td><a accesskey="n" href="ExoXsessionClient.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2645578" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id2645800" class="shortcut">Description</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="exo-HAL-Support-Functions"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2645578"></a><span class="refentrytitle">HAL Support Functions</span>
</h2>
<p>HAL Support Functions &#8212; Miscellaneous Utility Functions for HAL integration</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;exo-hal/exo-hal.h&gt;


<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a href="exo-HAL-Support-Functions.html#exo-hal-init">exo_hal_init</a>                        (void);
<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a href="exo-HAL-Support-Functions.html#exo-hal-udi-validate">exo_hal_udi_validate</a>                (const <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> *udi,
                                                         <a
href="../glib/glib-Basic-Types.html#gssize"
>gssize</a> len,
                                                         <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> **end);
<a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a>*              <a href="exo-HAL-Support-Functions.html#exo-hal-drive-compute-display-name">exo_hal_drive_compute_display_name</a>  (struct LibHalContext_s *context,
                                                         struct LibHalDrive_s *drive);
<a
href="../glib/glib-Doubly-Linked-Lists.html#GList"
>GList</a>*              <a href="exo-HAL-Support-Functions.html#exo-hal-drive-compute-icon-list">exo_hal_drive_compute_icon_list</a>     (struct LibHalContext_s *context,
                                                         struct LibHalDrive_s *drive);
<a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a>*              <a href="exo-HAL-Support-Functions.html#exo-hal-volume-compute-display-name">exo_hal_volume_compute_display_name</a> (struct LibHalContext_s *context,
                                                         struct LibHalVolume_s *volume,
                                                         struct LibHalDrive_s *drive);
<a
href="../glib/glib-Doubly-Linked-Lists.html#GList"
>GList</a>*              <a href="exo-HAL-Support-Functions.html#exo-hal-volume-compute-icon-list">exo_hal_volume_compute_icon_list</a>    (struct LibHalContext_s *context,
                                                         struct LibHalVolume_s *volume,
                                                         struct LibHalDrive_s *drive);
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2645800"></a><h2>Description</h2>
<p>
  This is an additional library that ships with the <span class="application">exo</span> package and
  offers support functions for HAL integration, that are used by <span><strong class="command">exo-mount</strong></span>
  and <span><strong class="command">Thunar</strong></span> to figure out display names and icons to visually
  present HAL devices to the user. The library may also be used by other components to offer
  smooth integration between various parts of the desktop, making sure that the same names
  and icons are used for devices everywhere.
</p>
<p>
  Since HAL is currently an optional dependency for Xfce, you should first check whether HAL support is
  really available by calling the <a href="exo-HAL-Support-Functions.html#exo-hal-init"><code class="function"><a href="exo-HAL-Support-Functions.html#exo-hal-init"><code class="function">exo_hal_init()</code></a></code></a>
  function, which returns <code class="literal">TRUE</code> if HAL support is available and the other functions will
  be able to do their work, or <code class="literal">FALSE</code> if the functions will return hardcoded default
  values instead. The <a href="exo-HAL-Support-Functions.html#exo-hal-init"><code class="function"><a href="exo-HAL-Support-Functions.html#exo-hal-init"><code class="function">exo_hal_init()</code></a></code></a> also takes
  care of setting up the internationalization support, so make sure you call it first.
</p>
<p>
  The HAL support module is not part of the main <code class="filename">exo</code> library, so you if you want to
  use any of these functions you will need to explicitly link to the <code class="filename">exo-hal</code> library.
  This is done with the <span><strong class="command">pkg-config</strong></span> utility, using <code class="filename">exo-hal-0.3</code> as
  the package name.
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2645928"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2645938"></a><h3>
<a name="exo-hal-init"></a>exo_hal_init ()</h3>
<a class="indexterm" name="id2645954"></a><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            exo_hal_init                        (void);</pre>
<p>
Initializes the HAL support module, which includes setting up the
internationalization support. Returns <a
href="../glib/glib-Standard-Macros.html#TRUE:CAPS"
><code class="literal">TRUE</code></a> if support for HAL was
enabled at compile time, <a
href="../glib/glib-Standard-Macros.html#FALSE:CAPS"
><code class="literal">FALSE</code></a> otherwise.
</p>
<p>
Make sure you call this function first prior to calling any of the
functions below.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <a
href="../glib/glib-Standard-Macros.html#TRUE:CAPS"
><code class="literal">TRUE</code></a> if HAL support is available, <a
href="../glib/glib-Standard-Macros.html#FALSE:CAPS"
><code class="literal">FALSE</code></a> otherwise.

</td>
</tr></tbody>
</table></div>
<p class="since">Since  0.3.1.13
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2646049"></a><h3>
<a name="exo-hal-udi-validate"></a>exo_hal_udi_validate ()</h3>
<a class="indexterm" name="id2646065"></a><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            exo_hal_udi_validate                (const <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> *udi,
                                                         <a
href="../glib/glib-Basic-Types.html#gssize"
>gssize</a> len,
                                                         <a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a> **end);</pre>
<p>
Checks that the given range of the <em class="parameter"><code>udi</code></em> is a valid HAL device UDI (i.e. a valid
D-BUS object path name in the D-BUS protocol). Part of the validation ensures
that the <em class="parameter"><code>udi</code></em> contains only ASCII.
</p>
<p>
If <em class="parameter"><code>end</code></em> is non-<a
href="../glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a>, then then end of the valid range will be stored there (i.e. the
start of the first invalid character if some bytes were invalid, or the end of the
text being validated otherwise).
</p>
<p>
Returns <a
href="../glib/glib-Standard-Macros.html#TRUE:CAPS"
><code class="literal">TRUE</code></a> if all of <em class="parameter"><code>udi</code></em> was valid. All HAL routines <span class="emphasis"><em>require</em></span>
valid UDIs as input; so data read from a file or the command line should be checked
with <a href="exo-HAL-Support-Functions.html#exo-hal-udi-validate"><code class="function">exo_hal_udi_validate()</code></a> before doing anything else with it.
</p>
<p>
Note that <a href="exo-HAL-Support-Functions.html#exo-hal-udi-validate"><code class="function">exo_hal_udi_validate()</code></a> is always available, no matter if HAL support was
enabled at compile time.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>udi</code></em>&#160;:</span></td>
<td> the HAL device UDI.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>len</code></em>&#160;:</span></td>
<td> the max number of bytes to validate, or <code class="literal">-1</code> to go until NUL.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>end</code></em>&#160;:</span></td>
<td> return location for end of valid data.
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <a
href="../glib/glib-Standard-Macros.html#TRUE:CAPS"
><code class="literal">TRUE</code></a> if <em class="parameter"><code>udi</code></em> was a valid HAL device UDI.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.3.1.13
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2646288"></a><h3>
<a name="exo-hal-drive-compute-display-name"></a>exo_hal_drive_compute_display_name ()</h3>
<a class="indexterm" name="id2646304"></a><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a>*              exo_hal_drive_compute_display_name  (struct LibHalContext_s *context,
                                                         struct LibHalDrive_s *drive);</pre>
<p>
Computes a usable display name that should be used to present
<em class="parameter"><code>drive</code></em> to the user. May return <a
href="../glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a> if it's unable to determine
a display name (i.e. if HAL support is not available), in which
case the caller should try to come up with a fallback name on
it's own (i.e. using the basename of the <em class="parameter"><code>drive</code></em>s device
file or something like that).
</p>
<p>
The caller is responsible to free the returned string using
<a
href="../glib/glib-Memory-Allocation.html#g-free"
><code class="function">g_free()</code></a> when no longer needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>context</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalContext</span>, connected to the HAL daemon.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>drive</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalDrive</span>.
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> a display name for the <em class="parameter"><code>drive</code></em> that should be used
              to present the <em class="parameter"><code>drive</code></em> to the user or <a
href="../glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a> if the
              function is unable to come up with a usable name
              and the caller should figure out a fallback name
              on its own.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.3.1.13
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2646482"></a><h3>
<a name="exo-hal-drive-compute-icon-list"></a>exo_hal_drive_compute_icon_list ()</h3>
<a class="indexterm" name="id2646498"></a><pre class="programlisting"><a
href="../glib/glib-Doubly-Linked-Lists.html#GList"
>GList</a>*              exo_hal_drive_compute_icon_list     (struct LibHalContext_s *context,
                                                         struct LibHalDrive_s *drive);</pre>
<p>
Tries to find a list of icon names that may be used to visually present <em class="parameter"><code>drive</code></em>
to the user. The list is sorted by relevance, with the best icon matches
appearing first in the list.
</p>
<p>
The caller is responsible to free the returned list using
</p>
<div class="informalexample"><pre class="programlisting">
g_list_foreach (list, (GFunc) g_free, NULL);
g_list_free (list);
</pre></div>
<p>
when no longer needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>context</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalContext</span>, connected to the HAL daemon.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>drive</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalDrive</span>.
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> a list of icon names for icons that can be used to visually
              represent the <em class="parameter"><code>drive</code></em> to the user.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.3.1.13
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2646634"></a><h3>
<a name="exo-hal-volume-compute-display-name"></a>exo_hal_volume_compute_display_name ()</h3>
<a class="indexterm" name="id2646650"></a><pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gchar"
>gchar</a>*              exo_hal_volume_compute_display_name (struct LibHalContext_s *context,
                                                         struct LibHalVolume_s *volume,
                                                         struct LibHalDrive_s *drive);</pre>
<p>
Similar to <a href="exo-HAL-Support-Functions.html#exo-hal-drive-compute-display-name"><code class="function">exo_hal_drive_compute_display_name()</code></a>, but tries to find a
suitable display name for the <em class="parameter"><code>volume</code></em> first, falling back to <em class="parameter"><code>drive</code></em>
under certain conditions. This function may return <a
href="../glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a> if no
suitable display name was found.
</p>
<p>
The caller is responsible to free the returned string using <a
href="../glib/glib-Memory-Allocation.html#g-free"
><code class="function">g_free()</code></a>
when no longer needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>context</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalContext</span>, connected to the HAL daemon.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>volume</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalVolume</span>.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>drive</code></em>&#160;:</span></td>
<td> the <span class="type">LibHalDrive</span> of the <em class="parameter"><code>volume</code></em>.
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the display name for the <em class="parameter"><code>volume</code></em> or <a
href="../glib/glib-Standard-Macros.html#NULL:CAPS"
><code class="literal">NULL</code></a> if the
              function is unable to determine the display name.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.3.1.13
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2646863"></a><h3>
<a name="exo-hal-volume-compute-icon-list"></a>exo_hal_volume_compute_icon_list ()</h3>
<a class="indexterm" name="id2646879"></a><pre class="programlisting"><a
href="../glib/glib-Doubly-Linked-Lists.html#GList"
>GList</a>*              exo_hal_volume_compute_icon_list    (struct LibHalContext_s *context,
                                                         struct LibHalVolume_s *volume,
                                                         struct LibHalDrive_s *drive);</pre>
<p>
Similar to <code class="function">exo_hal_drive_compute_icon_name()</code>, but first looks for
icons for <em class="parameter"><code>volume</code></em>, falling back to an icons for <em class="parameter"><code>drive</code></em>.
</p>
<p>
The caller is responsible to free the returned list using
</p>
<div class="informalexample"><pre class="programlisting">
g_list_foreach (list, (GFunc) g_free, NULL);
g_list_free (list);
</pre></div>
<p>
when no longer needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>context</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalContext</span>, connected to the HAL daemon.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>volume</code></em>&#160;:</span></td>
<td> a <span class="type">LibHalVolume</span>.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>drive</code></em>&#160;:</span></td>
<td> the <span class="type">LibHalDrive</span> of the <em class="parameter"><code>volume</code></em>.
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> a list of icon names for icons that can be used to visually
              represent the <em class="parameter"><code>volume</code></em> to the user.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.3.1.13
</p>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2647069"></a><h2>See Also</h2>
<p>
  <a href="http://gitweb.freedesktop.org/?p=hal.git;a=blob_plain;f=doc/spec/hal-spec.html" target="_top">HAL
  Specification</a>
</p>
</div>
</div>
</body>
</html>
