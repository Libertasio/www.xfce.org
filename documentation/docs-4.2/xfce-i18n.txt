

                SHORT GUIDE ABOUT TRANSLATING MESSAGES


0. LICENSE AND AUTHORS 
======================

This document is provided under the Creative Commons Public License
2.5 (http://creativecommons.org/licenses/by/2.5/). It is based on
the contributions by the following authors:

Christian Biere (cbiere at users.sourceforge.net)
Thomas Schürger (trancetip at users.sourceforge.net)
Murphy (eqom14 at users.sourceforge.net)
Daichi Kawahata (daichik at users.sourceforge.net)


1. INTRO
========

This is a short summary of the gettext documentation. See the APPENDIX
if this information isn't sufficient for you.


2. Extract the translatable strings from the source files:
==========================================================

Update your source files to the latest version from SVN,

    svn checkout http://svn.foo-projects.org/svn/xfce/modules/trunk-po

or current stable version 4.2,

    svn checkout http://svn.foo-projects.org/svn/xfce/modules/4.2-po

Then extract the strings:

    $ cd po
    $ make update-po
    $ cp package.pot messages.po
or
    $ msginit (and enter your e-mail address)

If you look at the source files, you'll find many strings which are
not marked as translatable. The reason for this is that these strings
are only used internally or they are only interesting for developers
i.e., for debugging.

NOTE: It's recommended having translation for 4.2 at first, SVN trunk
version would be frequently changed unless they are frozen by developer.


3. Prepare the PO file:
=======================

Use your favourite editor and edit the first lines of ``messages.po''
to match these:

    "Project-Id-Version: PACKAGE VERSION\n"
    "POT-Creation-Date: 2005-06-15 23:20+0200\n"
    "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
    "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
    "Language-Team: LANGUAGE <LL@li.org>\n"
    "MIME-Version: 1.0\n"
    "Content-Type: text/plain; charset=UTF-8\n"
    "Content-Transfer-Encoding: 8bit\n"

Replace PACKAGE, VERSION, YEAR, MO etc. with reasonable values. It's
important that you use ``charset=UTF-8'' as above. If your editor
doesn't support UTF-8 don't mind, you can convert that later.

NOTE: Please don't leave default values as they are.


4. Translate the messages:
==========================

You can use a text editor Emacs with `po-mode' or a graphical PO file
editor like `poEdit', `Gedit' (for GNOME user), `KBabel' (for KDE user),
these editor have special feature for editing PO file. You can use
normal editor like vi, vim etc. of course, but it's highly recommended
using one of the above four editors.

In the PO file you'll find something like this:

    #: main.c:42
    msgid "Hello world"
    msgstr ""

If you want to translate to German, you would change the 3rd line to
the following:

    msgstr "Hallo Welt"

Don't touch the string behind ``msgid''! If you find typos or the like,
this string must be corrected in the source file. If you see a string
with a ``%'' in it, then leave the part with ``%'' as-is and don't
change the order of these ``words''. Also keep the character after an
backslash ``\'' as-is. For example:

    msgid "%-8s are %d time faster than %s.\n"
    msgstr "%-8s sind %d mal schneller als %s.\n"

``\n'' means ``newline'' in which line will be new-lined on output, or
another example from Xfmedia:

    msgid ""
    "This is a printf-like format string controlling the display of the "
    "playlist.  Xfmedia will replace the following symbols:\n"
    "\t%p: Artist/Performer\n"
    "\t%t: Track Title\n"
    "\t%a: Album Name\n"
    "\t%T: Track Number\n"
    "\t%g: Genre\n"
    "\t%y: Year\n"
    "\t%f: Filename\n"
    "\t%%: a percent sign"

in that case ``\t'' inserts the `'tab'' space on output, note that if
you are using `po-mode' on Emacs, you should use actual ``tab'' space
with ``C-q Tab'' or ``enter'' instead of putting ``\t'', ``\n''.

See man printf(3) for details about the syntax, if you have problems
with it.

You don't have to translate every message. If you cannot or don't
want to translate a message just leave ``msgstr ""'' as-is. Don't
copy the string of msgid!

Some strings contain a single underscore (e.g., "_Edit list..." from
Xfdesktop). In this case the underscore declares the following letter
as accelerator key. In this example, the key combination <Alt>+E or
sometimes <Control>+E would activate the GUI element associated with
this string. You should use an appropriate character as accelerator
in the translation as well, just append an underscore to selected
character:

    msgid "_Edit list..."
    msgstr "_Liste bearbeiten..."

If you change the accelerator key, try to make sure that the chosen
key doesn't clash with another one in the same scope. In rare cases,
you might want to discard the underscore so that no accelerator will
be available for the GUI element.


4.1 Translation Context:
========================

The GUI often uses single words or short word combinations. When used
as a frame title a colon is appended the English to disambiguate its
meaning. Another possibility to disambiguate especially short strings
is using the character '|' as separator. If the English text contains
this character, the part up to the '|' may contain a comment for
translator and/or simply declare a namespace so that the word can be
translated in a certain meaning even if the same word is used with
different meanings in other places. For example (from Xfce4-panel):

    msgid "tip|Info"
    msgstr "Información"

In the translated string discard everything up to the first '|' and
translate the rest only.


5. Convert the output to UTF-8 (if it's not already UTF-8 encoded):
===================================================================

iconv -f CHARSET -t UTF-8 messages.po > utf8.po

Replace CHARSET by the one you use e.g., if you are from Western
Europe it's probably ISO-8859-1. Otherwise see what echo $LC_CTYPE
says, and strip the part up to the . (dot). For example:

    $ echo $LC_CTYPE
    ja_JP.eucJP
    $ iconv -f eucJP -t UTF-8 messages.po > utf8.po

If you use Vim you can also convert lines on the fly like this:

    :,!iconv -f ISO-8859-1 -t UTF-8

This usually works even if your terminal doesn't support UTF-8
encoded character sets.


6. Checking and Submitting the PO file:
=======================================

First, verify that your PO file is correct:

    $ msgfmt --check --check-accelerators=_ -o /dev/null utf8.po

You should get no warnings, but if you got them, fix it following
outputted warning messages. After checking, you can send your
translation to:

    Xfce translations mailing list <xfce-i18n@xfce.org>

if you are going to send multiple files at once, please use 'tar +
bzip2/gzip' format.

NOTE: This part is so important that please don't post your
translations to the list unless you have no warning.


7. Stay tuned!
==============

The messages may be changed from release to release and with growing
functionality there will be more messages that should be translated.
Thus, translation isn't something static. Every few month there will
be a few more sentences to be translated.

To update the PO files to reflect any changes to translatable strings
in the source files simply update your files from SVN and run

    $ cd po
    $ make update-po

This will scan the source files for translatable strings, will (re-)build
the file `package.pot' and will use msgmerge to update the PO files from
the POT file.

After that you can check your language's PO file for missing/fuzzy
translations and add/correct them with you favorite editor.

When you're finished, you should run `make update-po' again. This will
wrap your .po file's lines properly to have a maximum line width of 80
characters.


8. Add localised keys to Desktop files:
=======================================

The Name, GenericName, and Comment keys should be translated. The
format is:

Key[locale]=localestring

For example (from Xfcalendar):

    Name=Xfce Calendar
    [...]
    Name[he]=לוח שנה Xfce

Make sure the file stays UTF-8 encoded.

NOTE: This isn't required if you're having translation for SVN trunk
version, instead you'll have to install decent intltool. If you are
using Emacs, `desktop-entry-mode' would be useful for checking file
validation.


9. FEEDBACK
===========

If you have comments, ideas or corrections, use:

    Xfce translations mailing list <xfce-i18n@xfce.org>

Your feedback will be gratefully appreciated.

10. APPENDIX
============

The complete GNU gettext manual:
http://www.gnu.org/manual/gettext/index.html

Country codes as standardized by the UNO (United Nations Organizations):
http://ftp.ics.uci.edu/pub/websoft/wwwstat/country-codes.txt

Freedesktop.org desktop entry spec:
http://www.freedesktop.org/standards/desktop-entry-spec/

Xfce translations statistics:
http://xfce.org/~kelnos/xfce4/i18n/

